import{A}from"./AppBar-67CipABS.js";import{a as N}from"./request-1LUaphst.js";import{_ as b,o as B,Q as L,r as v,a as o,c as r,d as R,u as s,f as V,G as q,g as F,m as f,F as w,e as z,b as e,t as i,R as k,p as E,i as j}from"./index-lL9sqtyl.js";import{I as G}from"./InfiniteList-UY61RceK.js";import{g as p}from"./global-DWf8yp1F.js";const D=u=>(E("data-v-6bd3e09e"),u=u(),j(),u),J={class:"container"},O=D(()=>e("div",{style:{height:"20px"}},null,-1)),P=["onClick"],Q=["src"],T={class:"footer"},$=D(()=>e("div",{style:{flex:"auto"}},null,-1)),H={key:0,class:"button running"},K={key:1,class:"button"},U=20,W={__name:"index",setup(u){B(()=>{h(p.value.id)});const x=L(),_=v(!1),g=v(!1),C=v(!1);var a=0;const n=v([]);function M(){a=0,h()}function h(m){let y="/manager/guild/activity/page";console.log("requestActivityList"),a>0&&(_.value=!0),a==0&&(g.value=!0),N.post(y,{condition:{guildId:p.value.id,status:0},pageNum:a+1,pageSize:U}).then(function(t){if(t.data.code==0){a==0?g.value=!1:_.value=!1,a++,console.log("activityData:",n.value,p.value.countryCode);for(let l=0;l<t.data.data.list.length;l++){let I=t.data.data.list[l],d=JSON.parse(I.scope);for(let c=0;c<d.length;c++)p.value.countryCode+""==d[c].country&&(I.icon=d[c].icon,console.log(l,d[c].icon))}n.value=n.value.concat(t.data.data.list)}}).catch(function(t){console.log(t)})}function S(m){x.push({name:"activity detail",query:{activity_id:m.id}})}return(m,y)=>(o(),r("div",J,[R(A,{title:s(f)("Activity list")},null,8,["title"]),O,n.value!=null?(o(),V(G,{key:0,class:"activity_list",onLoadMore:h,onRefresh:M,loadingMore:_.value,refreshing:g.value,noMoreData:C.value},{content:q(()=>[(o(!0),r(w,null,z(n.value,t=>(o(),r("div",{class:"list_item",onClick:l=>S(t)},[e("img",{class:"headimg",src:t.icon},null,8,Q),e("div",T,[e("div",null,[e("div",null,i(t.activityName),1),e("div",null,i(s(f)("Event time"))+":"+i(s(k)(parseInt(t.startAt)))+" - "+i(s(k)(parseInt(t.endAt))),1)]),$,t.status==1?(o(),r("div",H,i(s(f)("Is Running")),1)):(o(),r("div",K,i(s(f)("Completed")),1))])],8,P))),256))]),_:1},8,["loadingMore","refreshing","noMoreData"])):F("",!0)]))}},at=b(W,[["__scopeId","data-v-6bd3e09e"]]);export{at as default};
